---
title: 19博客框架升级
tags:
  - 教程
  - 博客
categories:
  - 互联网
  - 原创
mathjax: true
date: 2019-08-07 13:45:06
---
# 前言
我的博客框架已经好久没有动过了。印象中，去年升级过一次。只不过当时没有升级上最新版，用的是V5最后一个版本，也是iissnan维护的最后一个版本。后续版本都交给[theme-next](https://github.com/theme-next/hexo-theme-next)这一组织来管理。这个组织的官方网站和文档在[NexT - Theme for Hexo](https://theme-next.org/)。新版的信息都在这上面可以找得到
闲的没事，需要找些东西玩一下，所以决定在最近升级我的博客框架。我看到网上其他人的NexT主题又开始花里胡哨起来了。只不过我的要求不高，只要简洁，好看，速度快就好了，花里胡哨的东西，还是少些为好。
在此之前，我就已经意识到我会遇到很多坑，现在看来坑真的很多。

# 踩坑
## hexo框架升级
hexo框架升级相当之简单，基本不会遇到很多坑。
参考下面这篇教程
[Hexo版本升级和Next主题升级之坑](https://blog.csdn.net/whjkm/article/details/81088518)
核心代码
```
npm i hexo-cli -g
```
## next主题升级
我怕会有各种兼容性问题，所以我没有使用git pull来升级，我每次都是用蠢办法，直接从官网的Release页面下载最新版的主题包，再解压到主题目录中。
然后在通过对配置文件的比对，和网页效果的比对，将主题功能一个个配置和调试好。
然而我发现最新版的7.3.0是有Bug的。WTF...
Bug见下面这个issue
[Problem with v7.3](https://github.com/theme-next/hexo-theme-next/issues/1050)
所以我只好下上一个版本7.2.0的包，然后再重新配置。因为版本差异比较大，再加上以前些的文章不规范，所以渲染文章时又出问题了。所有文章的图片全部挂掉了。~不慌，小事~，看了下链接，发现是用的当前页面做的相对链接，正确的应该是站点的相对链接。
然后仔细观察发现MathJax也挂了，我明明开了，但是就是没有效果。最后上网查发现，MathJax被设计成默认关闭，需要在每篇文章声明才会开启，为了加快页面的加载速度。主要是这两个问题，让我在文章中进行大改。
后面，我还记得我以前通过修改代码，增加了两个功能。最后在网上找到了相关的修改教程。
[Hexo解决页面过小问题与设置透明背景](https://www.cnblogs.com/Mayfly-nymph/p/10622307.html)
[修改hexo的主题nexT中的Pisces主题宽度](https://blog.csdn.net/csdnSR/article/details/78300820)
阿里云OSS可以设置静态页面，然后我就想把我的博客也弄上去，这样就不用担心我的服务器更换或者挂了的情况。而且速度快，用香港的OSS还不用流量费(5G以下免费)
但是部署上去发现一个问题，就是阿里云oss的URL必须带index.html，而hexo并没有提供类似的功能。所以，只能手动修改hexo文件了。
参考[基于阿里云OSS搭建hexo博客](https://www.0daybug.com/2019/0326/hexo-on-oss/index.html)
## 新增功能
升级肯定要有些变化，不能变成刷版本号似的升级。所以我又新开了如下这些功能。
 - 文章字数，时长统计
 - Tag logo显示
 - 版权声明标记
 - 网页顶部加载条
 - 博客头部加入副标题显示
 - 评论系统